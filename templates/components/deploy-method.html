{% extends "base.html" %}

{% block content %}
<div class="container mt-5">
    <div class="text-center mb-5">
        <h2 class="fw-bold mb-2"><i class="bi bi-gear-wide-connected me-2"></i>选择 Hadoop 集群配置方式</h2>
        <p class="text-muted">请选择最适合您需求的部署模式，系统将为您提供最佳体验</p>
    </div>
    <div class="row justify-content-center">
        <!-- 全自动配置 -->
        <div class="col-md-4 mb-4">
            <div class="card h-100 shadow-lg border-0 method-card">
                <div class="card-body text-center">
                    <i class="bi bi-lightning-charge-fill text-primary fs-1 mb-3"></i>
                    <h5 class="card-title fw-bold">全自动配置</h5>
                    <ul class="text-start mb-3">
                        <li>自动检测服务器环境</li>
                        <li>自动安装所需组件</li>
                        <li>自动优化配置参数</li>
                    </ul>
                    <p class="text-muted small">适合快速部署标准集群</p>
                </div>
                <div class="card-footer bg-transparent border-0">
                    <button class="btn btn-primary w-100 btn-lg method-btn" onclick="selectMethod('auto')">
                        <i class="bi bi-rocket-takeoff me-1"></i> 选择全自动配置
                    </button>
                </div>
            </div>
        </div>
        <!-- 半自动配置 -->
        <div class="col-md-4 mb-4">
            <div class="card h-100 shadow-lg border-0 method-card">
                <div class="card-body text-center">
                    <i class="bi bi-sliders2-vertical text-success fs-1 mb-3"></i>
                    <h5 class="card-title fw-bold">半自动配置</h5>
                    <ul class="text-start mb-3">
                        <li>自定义关键参数</li>
                        <li>选择安装组件</li>
                        <li>调整性能设置</li>
                    </ul>
                    <p class="text-muted small">适合有一定经验的用户</p>
                </div>
                <div class="card-footer bg-transparent border-0">
                    <button class="btn btn-success w-100 btn-lg method-btn" onclick="selectMethod('semi-auto')">
                        <i class="bi bi-toggles2 me-1"></i> 选择半自动配置
                    </button>
                </div>
            </div>
        </div>
        <!-- 纯手动配置 -->
        <div class="col-md-4 mb-4">
            <div class="card h-100 shadow-lg border-0 method-card">
                <div class="card-body text-center">
                    <i class="bi bi-tools text-warning fs-1 mb-3"></i>
                    <h5 class="card-title fw-bold">纯手动配置</h5>
                    <ul class="text-start mb-3">
                        <li>逐项设置配置参数</li>
                        <li>手动安装组件</li>
                        <li>完全控制每个细节</li>
                    </ul>
                    <p class="text-muted small">适合高级用户和特殊需求</p>
                </div>
                <div class="card-footer bg-transparent border-0">
                    <button class="btn btn-warning w-100 btn-lg text-white method-btn" onclick="selectMethod('manual')">
                        <i class="bi bi-pencil-square me-1"></i> 选择纯手动配置
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.method-card {
    transition: transform 0.18s, box-shadow 0.18s;
    border-radius: 1.2rem !important;
}
.method-card:hover {
    transform: translateY(-8px) scale(1.03);
    box-shadow: 0 8px 32px rgba(13,110,253,0.10);
    z-index: 2;
}
.method-btn {
    border-radius: 2rem;
    font-weight: 600;
    letter-spacing: 1px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.06);
}

/* 响应式样式 */
@media (max-width: 768px) {
    .container {
        padding: 0 1rem;
    }
    
    h2 {
        font-size: 1.75rem;
    }
    
    .text-muted {
        font-size: 0.95rem;
    }
    
    .method-card {
        margin-bottom: 1.5rem;
    }
    
    .card-body {
        padding: 1.5rem;
    }
    
    .fs-1 {
        font-size: 2.5rem !important;
    }
    
    .card-title {
        font-size: 1.25rem;
    }
    
    .card-body ul {
        font-size: 0.9rem;
        padding-left: 1.25rem;
    }
    
    .card-body li {
        margin-bottom: 0.5rem;
    }
    
    .method-btn {
        font-size: 0.95rem;
        padding: 0.875rem 1.5rem;
    }
    
    .small {
        font-size: 0.85rem;
    }
}

@media (max-width: 576px) {
    h2 {
        font-size: 1.5rem;
    }
    
    .text-muted {
        font-size: 0.9rem;
    }
    
    .card-body {
        padding: 1.25rem;
    }
    
    .fs-1 {
        font-size: 2rem !important;
    }
    
    .card-title {
        font-size: 1.1rem;
    }
    
    .card-body ul {
        font-size: 0.85rem;
        padding-left: 1rem;
    }
    
    .method-btn {
        font-size: 0.9rem;
        padding: 0.75rem 1.25rem;
    }
    
    .small {
        font-size: 0.8rem;
    }
    
    .bi {
        font-size: 0.9rem;
    }
}

@media (max-width: 480px) {
    h2 {
        font-size: 1.35rem;
    }
    
    .card-body {
        padding: 1rem;
    }
    
    .fs-1 {
        font-size: 1.75rem !important;
    }
    
    .card-title {
        font-size: 1rem;
    }
    
    .card-body ul {
        font-size: 0.8rem;
    }
    
    .method-btn {
        font-size: 0.85rem;
        padding: 0.625rem 1rem;
    }
    
    .small {
        font-size: 0.75rem;
    }
}

/* 触摸设备优化 */
@media (hover: none) and (pointer: coarse) {
    .method-card:hover {
        transform: none;
    }
    
    .method-btn {
        min-height: 48px;
    }
}
</style>

<script>
    // 检查是否有服务器配置数据
    document.addEventListener('DOMContentLoaded', function() {
        const config = sessionStorage.getItem('serverConfig');
        if (!config) {
            alert('未找到服务器配置信息，请返回重新配置');
            window.location.href = '/';
        }
    });
    function selectMethod(method) {
        const config = sessionStorage.getItem('serverConfig');
        if (!config) {
            alert('未找到服务器配置信息，请返回重新配置');
            return;
        }
        let route;
        if (method === 'manual') {
            route = '/deploy/manualConfig';
        }
        else if (method === 'semi-auto') {
            route = '/deploy/semiAutoConfig';
        }
        else if (method === 'auto') {
            route = '/deploy/auto';
        }
        window.location.href = `${route}?method=${method}&config=${encodeURIComponent(config)}`;
    }
</script>
{% endblock %}